# CH03_高级用户组件

## AdapterView

### 1.基本

显示单一字符串

#### MainActivity

```java
package net.onest.arrayadapterch0203;

import androidx.appcompat.app.AppCompatActivity;

import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.AdapterView;
import android.widget.ArrayAdapter;
import android.widget.ListView;

public class MainActivity extends AppCompatActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        //ListView使用步骤：
        //1.准备数据源
        String[] names = {"Android基础开发","Android高级编程","Android综合应用"};
        //2.准备item的布局文件（SDK自带的布局文件）
        //3.选择一种Adapter，绑定Adapter
        ArrayAdapter<String> myAdapter = new ArrayAdapter<String>(this,//环境上下文
                android.R.layout.simple_list_item_1,//item的布局文件
                names);//数据源
        ListView nameListView = findViewById(R.id.lv_names);
        nameListView.setAdapter(myAdapter);
        //4.给ListView设置item点击事件的监听器
        nameListView.setOnItemClickListener(new AdapterView.OnItemClickListener() {
            @Override
            public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
                //parent是ListView对象
                //view是点击的item的视图对象
                //position是点击的item的位置，从0开始
                Log.e("点击ListView中position",position + "条");
                Log.e("点击ListView中id",id + "条");
                view.setBackgroundColor(getResources().getColor(android.R.color.holo_red_dark));
            }
        });
    }
}

```

#### XML

```java
<?xml version="1.0" encoding="utf-8"?>
<ListView
    android:id="@+id/lv_names"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    xmlns:android="http://schemas.android.com/apk/res/android" />

```

### 2.拓展

显示：申亚雨
			2018011886

#### MainActivity

```java
package net.onest.simpleadapterch0203;

import androidx.appcompat.app.AppCompatActivity;

import android.os.Bundle;
import android.widget.ListView;
import android.widget.SimpleAdapter;

import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

public class MainActivity extends AppCompatActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        //1.准备数据源
        List<Map<String, String>> students = new ArrayList<>();
        Map<String, String> stu1 = new HashMap<>();
        stu1.put("name", "张三");
        stu1.put("stuNo", "2018011785");
        Map<String, String> stu2 = new HashMap<>();
        stu2.put("name","李四");
        stu2.put("stuNo","2018011786");
        students.add(stu1);
        students.add(stu2);
        //2.准备item布局文件(自带的布局文件)
        //3.创建Adapter，绑定Adapter
        SimpleAdapter myAdapter = new SimpleAdapter(this,//环境上下文
                students,//数据源
                android.R.layout.simple_list_item_2,//item的布局文件
                new String[]{"name","stuNo"},//数据源中Map的key值
                new int[]{android.R.id.text1, android.R.id.text2});//item布局当中显示内容的控件的id

        ListView studentListView = findViewById(R.id.lv_student);
        studentListView.setAdapter(myAdapter);
        //4.设置ListView的监听器
    }
}

```

#### XML

```java
<?xml version="1.0" encoding="utf-8"?>
<ListView
    android:id="@+id/lv_student"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    xmlns:android="http://schemas.android.com/apk/res/android" />
```

### 3.高阶

显示：图片   申亚雨

​						2018011883

#### 1.自定义数据源Student类

```java
package net.onest.customadapterch0203;

public class Student {
    private String name;
    private String stuNo;
    private int photoId;

    public Student() {
    }

    public Student(String name, String stuNo, int photoId) {
        this.name = name;
        this.stuNo = stuNo;
        this.photoId = photoId;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public String getStuNo() {
        return stuNo;
    }

    public void setStuNo(String stuNo) {
        this.stuNo = stuNo;
    }

    public int getPhotoId() {
        return photoId;
    }

    public void setPhotoId(int photoId) {
        this.photoId = photoId;
    }
}

```

#### 2.自定义Adapter类

```java
package net.onest.customadapterch0203;

import android.content.Context;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.Button;
import android.widget.ImageView;
import android.widget.TextView;

import java.util.ArrayList;
import java.util.List;

public class CustomAdapter extends BaseAdapter {
    private Context mContext;
    private List<Student> students = new ArrayList<>();
    private int itemLayoutRes;

    public CustomAdapter(Context mContext, List<Student> students, int itemLayoutRes) {
        this.mContext = mContext;
        this.students = students;
        this.itemLayoutRes = itemLayoutRes;
    }

    @Override
    public int getCount() {//获得数据的条数
        if (null != students){
            return students.size();
        }
        return 0;
    }

    @Override
    public Object getItem(int position) {//获取每个item显示的数据对象
        if (null != students){
            return students.get(position);
        }
        return null;
    }

    @Override
    public long getItemId(int position) {//获取每个item的id值
        return position;
    }

    @Override
    //获取item的视图对象
    public View getView(final int position, View convertView, ViewGroup parent) {
        //convertView每个item的视图对象
        //1.加载item的布局文件
        if (convertView == null) {
            LayoutInflater inflater = LayoutInflater.from(mContext);//布局填充器
            convertView = inflater.inflate(itemLayoutRes, null);
        }

        //2.获取item中控件的引用
        ImageView ivPhoto = convertView.findViewById(R.id.iv_photo);
        TextView tvName = convertView.findViewById(R.id.tv_name);
        TextView tvNo = convertView.findViewById(R.id.tv_no);
        Button btnDelete = convertView.findViewById(R.id.btn_delete);

        //3.设置控件内容
        ivPhoto.setImageResource(students.get(position).getPhotoId());
        tvName.setText(students.get(position).getName());
        tvNo.setText(students.get(position).getStuNo());

        //4.设置控件事件监听器
        btnDelete.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                //从数据源中删除某条数据
                students.remove(position);
                //更新Adapter
                notifyDataSetChanged();
            }
        });

        return convertView;
    }
}

```

#### 3.自定义item布局

~~~java
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:descendantFocusability="blocksDescendants">

    <ImageView
        android:id="@+id/iv_photo"
        android:layout_width="100dp"
        android:layout_height="100dp"/>

    <LinearLayout
        android:layout_toRightOf="@id/iv_photo"
        android:layout_centerVertical="true"
        android:layout_gravity="center_vertical"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical">

        <TextView
            android:id="@+id/tv_name"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:textSize="25sp"/>

        <TextView
            android:id="@+id/tv_no"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:textSize="20sp"/>
    </LinearLayout>

</RelativeLayout>
~~~



#### MainActivity

```java
package net.onest.customadapterch0203;

import androidx.appcompat.app.AppCompatActivity;

import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.AdapterView;
import android.widget.Button;
import android.widget.ListView;
import android.widget.TextView;

import java.util.ArrayList;
import java.util.List;

public class MainActivity extends AppCompatActivity {

    private List<Student> students = new ArrayList<>();
    private CustomAdapter customAdapter;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.activity_main);

        //1.准备数据
        initData();
        //2.定义item布局文件(自定义)
        //3.创建Adapter，绑定Adapter
        initView();
        //4.设置监听器

        //5.添加学生，让数据显示，根据数据源的变化而变化
        addStudent();
    }
    public void initView(){
        customAdapter = new CustomAdapter(this, students,
                R.layout.student_list_item);
        ListView stuListView = findViewById(R.id.lv_student);
        stuListView.setAdapter(customAdapter);
        stuListView.setOnItemClickListener(new AdapterView.OnItemClickListener() {
            @Override
            public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
                //打印选中的学生的姓名
                Log.e("选中的学生姓名",students.get(position).getName());
            }
        });
    }

    public void initData(){
        Student stu1 = new Student("张三","2018011785",R.drawable.boy);
        Student stu2 = new Student("李四","20180011786",R.drawable.girl);
        Student stu3 = new Student("张三","2018011785",R.drawable.boy);
        Student stu4 = new Student("李四","20180011786",R.drawable.girl);
        Student stu5 = new Student("张三","2018011785",R.drawable.boy);
        Student stu6 = new Student("李四","20180011786",R.drawable.girl);
        students.add(stu1);
        students.add(stu2);

    }

    public void addStudent(){
        Button btnAdd = findViewById(R.id.btn_add);
        btnAdd.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                //添加学生
                Student stu = new Student("王五","2018011787",R.drawable.boy);
                //修改数据源
                students.add(stu);
                //更新Adapter
                customAdapter.notifyDataSetChanged();
            }
        });
    }
}

```

### 4.ListView---->GridView

数据源不变

自定义Adapter不变

只改变主布局文件的ListView---->GridView

```java
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    xmlns:android="http://schemas.android.com/apk/res/android" >
    <GridView
        android:id="@+id/gv_student"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:numColumns="auto_fit"
        xmlns:android="http://schemas.android.com/apk/res/android" />
</LinearLayout>
```

### 5.Spinner下拉列表

两种使用方法：

#### 1.使用Adapter

```java
 public void initSpinner(){
        String[] citys = {"北京","上海","深圳"};
        ArrayAdapter myAdapter = new ArrayAdapter(this,
                android.R.layout.simple_list_item_1,
                citys);
        Spinner spCity = findViewById(R.id.sp_city);
        spCity.setAdapter(myAdapter);
    }
}
```

#### 2.entries属性

先定义资源文件

```xml
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <array name="courcenames">
        <item>面向对象程序设计</item>
        <item>数据结构</item>
        <item>网络原理</item>
    </array>
</resources>
```

```xml
    <Spinner
        android:id="@+id/sp_course"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:entries="@array/courcenames"/><!--使用entries就不需要定义Adapter了-->
```

## TabHost

### 1.MainActivity

```java
package net.onest.tabhostch0203;

import androidx.appcompat.app.AppCompatActivity;

import android.os.Bundle;
import android.util.Log;
import android.widget.TabHost;

public class MainActivity extends AppCompatActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        //1.获取到TabHost引用
        TabHost tabHost = findViewById(android.R.id.tabhost);
        //2.初始化tabHost
        tabHost.setup();
        //3.创建TabSpec页面
        TabHost.TabSpec tab1 = tabHost.newTabSpec("message_tab")
                .setIndicator("短信")//选项按钮显示的文字
                .setContent(R.id.tab1);//短信页面对应的布局

        TabHost.TabSpec tab2 = tabHost.newTabSpec("contact_tab")
                .setIndicator("联系人")
                .setContent(R.id.tab2);

        //4.把tabspec添加到tabhost
        tabHost.addTab(tab1);
        tabHost.addTab(tab2);

        //5.给TabHost添加监听器
        tabHost.setOnTabChangedListener(new TabHost.OnTabChangeListener() {
            @Override
            public void onTabChanged(String tabId) {//当切换选项按钮时调用
                Log.e("切换选项",tabId);
            }
        });
    }
}

```

### 2.XML文件

```xml
<?xml version="1.0" encoding="utf-8"?>
<!--  界面整体，id的值不可变  -->
<TabHost
    android:id="@android:id/tabhost"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    xmlns:android="http://schemas.android.com/apk/res/android" >
    <RelativeLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent">
        <!-- 选项标签栏 id值不可变-->
        <TabWidget
            android:id="@android:id/tabs"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"/>
        <!-- 具体的内容页-->
        <FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_above="@android:id/tabs">

            <!--第一个页面布局-->
            <LinearLayout
                android:id="@+id/tab1"
                android:layout_width="match_parent"
                android:layout_height="match_parent">
                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="这是第一个页面"
                    android:textSize="25sp"/>
            </LinearLayout>

            <!--第二个页面布局-->
            <LinearLayout
                android:id="@+id/tab2"
                android:layout_width="match_parent"
                android:layout_height="match_parent">
                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="这是第二个页面"
                    android:textSize="25sp"/>
            </LinearLayout>
        </FrameLayout>
    </RelativeLayout>
</TabHost>
```

## FragmentTabHost

### 1.基本

标签是一个字符串

#### 主XML

~~~xml
<?xml version="1.0" encoding="utf-8"?>
<androidx.fragment.app.FragmentTabHost
    android:id="@android:id/tabhost"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    xmlns:android="http://schemas.android.com/apk/res/android" >

    <RelativeLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent">
        <TabWidget
            android:id="@android:id/tabs"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"/>
        <FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_above="@android:id/tabs"/>
    </RelativeLayout>
</androidx.fragment.app.FragmentTabHost>
~~~

#### Fragment的布局

生活中有几个fragment就写几个，一个布局对应一个fragment的类

```xml
<?xml version="1.0" encoding="utf-8"?>
<!--选项内容页面的布局文件-->
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical" android:layout_width="match_parent"
    android:layout_height="match_parent">

    <TextView
        android:id="@+id/tv_content"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textSize="30sp"
        android:textColor="#008577"/>

</LinearLayout>
```



#### Fragment类（有几个fragment就写几个）

FirstFragment

```java
package net.onest.fragmenttabhostch0203.fragment;

import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.TextView;

import androidx.annotation.NonNull;
import androidx.annotation.Nullable;
import androidx.fragment.app.Fragment;

import net.onest.fragmenttabhostch0203.R;

//第一个内容页面对应的Fragment类
public class FirstFragment extends Fragment {
    @Nullable
    @Override
    public View onCreateView(@NonNull LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {
        //加载内容页面的布局文件（将内容页面的XML布局文件转成View类型的对象）
        View view = inflater.inflate(R.layout.fragment_layout,//内容页面的布局文件
                container,//根视图对象
                false);//false表示需要手动调用addView方法将view添加到container
                                     //true表示不需要手动调用addView方法

        //获取内容页面当中控件的引用
        TextView tvContent = view.findViewById(R.id.tv_content);
        tvContent.setText("这是第一个内容页面");

        return view;
    }
}

```



SecondFragment

```java
package net.onest.fragmenttabhostch0203.fragment;

import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.TextView;

import androidx.annotation.NonNull;
import androidx.annotation.Nullable;
import androidx.fragment.app.Fragment;

import net.onest.fragmenttabhostch0203.R;

public class SecondFragment extends Fragment {
    @Nullable
    @Override
    public View onCreateView(@NonNull LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {
        View view = inflater.inflate(R.layout.fragment_layout,//内容页面的布局文件
                container,//根视图对象
                false);

        //获取内容页面当中控件的引用
        TextView tvContent = view.findViewById(R.id.tv_content);
        tvContent.setText("这是第二个内容页面");

        return view;
    }
}

```

#### MainActivity

~~~java
package net.onest.fragmenttabhostch0203;

import androidx.appcompat.app.AppCompatActivity;
import androidx.fragment.app.FragmentTabHost;

import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.widget.ImageView;
import android.widget.TabHost;
import android.widget.TextView;

import net.onest.fragmenttabhostch0203.fragment.FirstFragment;
import net.onest.fragmenttabhostch0203.fragment.SecondFragment;

import java.util.HashMap;
import java.util.Map;

public class MainActivity extends AppCompatActivity {

    private Map<String, ImageView> imageViewMap = new HashMap<>();
    private Map<String, TextView> textViewMap = new HashMap<>();

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        //获取FragmentTabHost的引用
        FragmentTabHost fragmentTabHost = findViewById(android.R.id.tabhost);
        //初始化
        fragmentTabHost.setup(this,
                getSupportFragmentManager(),//管理多个Fragment对象的管理器
                android.R.id.tabcontent);//显示内容页面的控件的id

        //创建内容页面TabSpec对象
        TabHost.TabSpec tab1 = fragmentTabHost.newTabSpec("first_tab")
                .setIndicator(getTabSpecView("first_tab","短信",R.drawable.message));
//                .setIndicator("短信");
        //Class参数：类名.class,对象.getClass()
        fragmentTabHost.addTab(tab1,
                FirstFragment.class,//FristFragment类的Class（字节码）对象
                null);//传递数据时使用，不需要传递数据直接传null

        TabHost.TabSpec tab2 = fragmentTabHost.newTabSpec("second_tab")
                .setIndicator(getTabSpecView("second_tab","联系人",R.drawable.contact));
//                .setIndicator("联系人");
        fragmentTabHost.addTab(tab2,
                SecondFragment.class,//SecondFragment类的Class对象
                null);

        //处理fragmentTabHost的选项切换事件
        fragmentTabHost.setOnTabChangedListener(new TabHost.OnTabChangeListener() {
            @Override
            public void onTabChanged(String tabId) {
                //修改图片和文字的颜色
                switch (tabId){
                    case "first_tab"://选中了短信
                        imageViewMap.get("first_tab").setImageResource(R.drawable.message1);
                        imageViewMap.get("second_tab").setImageResource(R.drawable.contact);
                        break;
                    case "second_tab"://选中了联系人
                        imageViewMap.get("first_tab").setImageResource(R.drawable.message);
                        imageViewMap.get("second_tab").setImageResource(R.drawable.contact1);
                        break;
                }
            }
        });

        //设置默认选中的标签页:参数是下标
        fragmentTabHost.setCurrentTab(0);
        imageViewMap.get("first_tab").setImageResource(R.drawable.message1);
        //setTextColor不能直接传入color资源的id号
        textViewMap.get("first_tab").setTextColor(getResources().getColor(android.R.color.black));
    }
    
	//得到标签的布局的方法
    public View getTabSpecView(String tag, String tilte, int drawable){
        View view = getLayoutInflater().inflate(R.layout.tab_spec_layout,null);

        //获取tab_spec_layout布局当中视图控件的引用
        ImageView icon = view.findViewById(R.id.icon);
        icon.setImageResource(drawable);

        //将ImageView对象存储到Map中
        imageViewMap.put(tag,icon);

        TextView tvTitle = view.findViewById(R.id.title);
        tvTitle.setText(tilte);

        textViewMap.put(tag,tvTitle);

        return view;
    }
}

~~~

### 2.提升

标签的布局自定义

~~~java
  .setIndicator("短信");
//转化为
  .setIndicator(getTabSpecView("second_tab","联系人",R.drawable.contact));

~~~

#### 自定义标签布局

~~~xml
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical" android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:gravity="center">

    <ImageView
        android:id="@+id/icon"
        android:layout_width="40dp"
        android:layout_height="40dp"/>
    <TextView
        android:id="@+id/title"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"/>
</LinearLayout>
~~~

### 3.优化

为每一个标签设置点击事件，点击后黑色变成蓝色

代码在上

# CH_04Activity

## Activity的创建和跳转

MainActivity向NewActivity跳转并传递数据，NewActivity得到Intent中的数据，显示，并修改，将修改后的数据返回给MainActivity，MainActivity处理响应事件

MainActivity

~~~java
package com.example.ch04_01activity;

import androidx.annotation.Nullable;
import androidx.appcompat.app.AppCompatActivity;

import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.AdapterView;
import android.widget.ArrayAdapter;
import android.widget.ListView;

public class MainActivity extends AppCompatActivity {
private String[] names={"张三","李四","王五"};
private ArrayAdapter arrayAdapter;
private  int nowPosition;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        //使用ListView显示数据
        ListView listView=findViewById(R.id.lv);
        arrayAdapter=new ArrayAdapter(this,android.R.layout.simple_expandable_list_item_1,names);
        listView.setAdapter(arrayAdapter);
        listView.setOnItemClickListener(new AdapterView.OnItemClickListener() {
            @Override
            public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
                //1.新建intent
                Intent intent=new Intent();
                nowPosition=position;
                //2.设置目的地
                intent.setClass(MainActivity.this,NewActivity.class);
//                //方式一:传递数据,跳转,
//                intent.putExtra("name",names[position]);
//                intent.putExtra("phone","121212154");
//                intent.putExtra("email","45486097@qq.com");
                //方式二：Bundle，把所有数据都加入到bundle中，bundle一捆数据
//                Bundle bundle=new Bundle();
//                bundle.putString("name",names[position]);
//                bundle.putString("phone","15485");
//                bundle.putString("email","54548");
//                intent.putExtra("bundle",bundle);
                //方式三：获取自定义类型的数据
                Student student=new Student("战三","115","4848");
                intent.putExtra("student",student);
                //3.跳转到新的activity
                startActivity(intent);//不传递数据，不需要返回相应
//                startActivityForResult(intent,100);//请求码：区分哪次的请求，需要返回响应


            }
        });
    }
//    //回调方法，在startActivityForResult后自动调用，接收响应的数据，并且刷新数据
//
//    @Override
//    protected void onActivityResult(int requestCode, int resultCode, @Nullable Intent data) {
//        //requestCode跳转时的请求码100
//        //resultCode响应码200
//        //data返回响应的Intent对象
//        super.onActivityResult(requestCode, resultCode, data);
//        if(requestCode==100&&resultCode==200){
//            String name=data.getStringExtra("name");
//            //要修改，还要知道position的值
//            names[nowPosition]=name;
//            //刷新ListView
//            arrayAdapter.notifyDataSetChanged();
//        }
//    }
}

~~~

NewActivity

~~~java
package com.example.ch04_01activity;

import android.content.Intent;
import android.os.Bundle;
import android.os.PersistableBundle;
import android.util.Log;
import android.view.View;
import android.widget.EditText;

import androidx.annotation.Nullable;
import androidx.appcompat.app.AppCompatActivity;

public class NewActivity extends AppCompatActivity {
    EditText etName;//此处不能findViewById，没有加载布局文件呢
    public void onCreate(@Nullable Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_new);
        //获取控件
       etName=findViewById(R.id.et_name);
        EditText etPhone=findViewById(R.id.et_phone);
        EditText etEmail=findViewById(R.id.et_email);
        //1.使用intent接收传递的数据
          Intent request=getIntent();//得到启动时的intent对象，即mainactivity的intent对象
//        String name=request.getStringExtra("name");
//        String phone=request.getStringExtra("phone");
//        String email=request.getStringExtra("email");
        //2.借助于bundle传递参数
//        Bundle bundle=request.getBundleExtra("bundle");
//        String name=bundle.getString("name");
//        String phone=bundle.getString("phone");
//        String email=bundle.getString("email");
//        etName.setText(name);
//        etPhone.setText(phone);
//        etEmail.setText(email);
        //3.获取自定义数据类型
        //序列化的接口类型，转化为student类型
        Student stu=(Student) request.getSerializableExtra("student");
        etName.setText(stu.getName());
        etPhone.setText(stu.getPhone());
        etEmail.setText(stu.getEmail());
        Log.e("name", "onCreate: "+stu.getName() );

    }
//    public void btnClick(View v){
//        //返回数据
//        Intent response=new Intent();
//        response.putExtra("name",etName.getText().toString());
//        //响应
//        setResult(200,response);
//        //结束当前的NewActivity
//        this.finish();
//    }

}

~~~

Student类

```java
package com.example.ch04_01activity;

import java.io.Serializable;

//使用intent传递该类型对象，该类应实现Serializable接口
public class Student implements Serializable {
    String name;
    String phone;
    String email;

    public Student(String name, String phone, String email) {
        this.name = name;
        this.phone = phone;
        this.email = email;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public String getPhone() {
        return phone;
    }

    public void setPhone(String phone) {
        this.phone = phone;
    }

    public String getEmail() {
        return email;
    }

    public void setEmail(String email) {
        this.email = email;
    }
}

```

activity_main.xml

```xml
<?xml version="1.0" encoding="utf-8"?>
<ListView android:layout_width="match_parent"
    android:id="@+id/lv"
    android:layout_height="match_parent"
    xmlns:android="http://schemas.android.com/apk/res/android" />
```

activity_new.xml

```xml
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="match_parent"
    android:layout_height="match_parent">
<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal">
    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="姓名："
        android:textSize="25sp"/>
    <EditText
        android:id="@+id/et_name"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"/>
</LinearLayout>
    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal">
        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="电话："
            android:textSize="25sp"/>
        <EditText
            android:id="@+id/et_phone"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"/>
    </LinearLayout>
    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal">
        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="邮箱："
            android:textSize="25sp"/>
        <EditText
            android:id="@+id/et_email"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"/>
    </LinearLayout>
<!--    <Button-->
<!--        android:id="@+id/btn_save"-->
<!--        android:layout_width="match_parent"-->
<!--        android:layout_height="wrap_content"-->
<!--        android:text="保存"-->
<!--        android:onClick="btnClick"/>-->
</LinearLayout>
```

